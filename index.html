<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
  />
  <title>Gestión de Cuentas Corrientes</title>

  <!-- Bootstrap y Font Awesome -->
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  />

  <!-- Estilos -->
  <link rel="stylesheet" href="css/styles.css" />
</head>

<body>
  <!-- Header fijo -->
  <header class="main-header d-flex justify-content-between align-items-center px-3 py-2">
    <div class="header-actions-left">
      <button id="open-dashboard-btn" class="btn btn-outline-secondary btn-sm" title="Abrir Dashboard">
        <i class="fas fa-chart-bar"></i> <span class="d-none d-sm-inline">Dashboard</span>
      </button>
    </div>

    <h1 class="app-title text-center flex-grow-1">Gestión de Cuentas Corrientes</h1>

    <div class="theme-switch-container">
      <label class="theme-switch" aria-label="Cambiar tema">
        <input type="checkbox" id="toggle-dark-mode" />
        <span class="slider"></span>
        <i class="fas fa-sun icon-light"></i>
        <i class="fas fa-moon icon-dark"></i>
      </label>
    </div>
  </header>

  <!-- Panel lateral Dashboard (izquierda) -->
  <aside id="dashboard-panel" aria-hidden="true">
    <div class="dashboard-header">
      <h3 class="mb-0"><i class="fas fa-tachometer-alt"></i> Panel General</h3>
      <div class="dashboard-actions d-flex align-items-center">
        <button id="export-csv-btn" class="btn btn-outline-success btn-sm mr-2" title="Exportar CSV (pronto)">
          <i class="fas fa-file-csv"></i>
        </button>
        <button id="refresh-stats-btn" class="btn btn-light btn-sm mr-2" title="Refrescar">
          <i class="fas fa-sync-alt"></i>
        </button>
        <button id="close-dashboard-btn" class="btn btn-light btn-sm" title="Cerrar">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>

    <div class="dashboard-content">
      <div class="stats-grid interactive">
        <div class="stat-card" data-type="clients">
          <i class="fas fa-users stat-icon-compact"></i>
          <div class="stat-text">
            <span class="stat-label">Clientes</span>
            <span class="stat-value" id="stat-total-clients">0</span>
          </div>
        </div>

        <div class="stat-card" data-type="debt">
          <i class="fas fa-hand-holding-usd stat-icon-compact"></i>
          <div class="stat-text">
            <span class="stat-label">Deuda total</span>
            <span class="stat-value" id="stat-total-debt">$0</span>
          </div>
        </div>

        <div class="stat-card" data-type="payments">
          <i class="fas fa-receipt stat-icon-compact"></i>
          <div class="stat-text">
            <span class="stat-label">Pagos del mes</span>
            <span class="stat-value" id="stat-month-payments">$0</span>
          </div>
        </div>

        <div class="stat-card" data-type="debtors">
          <i class="fas fa-user-clock stat-icon-compact"></i>
          <div class="stat-text">
            <span class="stat-label">Clientes con deuda</span>
            <span class="stat-value" id="stat-debtors-count">0</span>
          </div>
        </div>
      </div>

      <p class="small text-muted mt-3 mb-0 text-center">
        Tocá una tarjeta para ver más detalles.
      </p>
    </div>
  </aside>

  <div id="dashboard-backdrop"></div>

  <!-- Contenido principal -->
  <main class="container mt-4 mb-5 px-3">
    <!-- Formulario de clientes -->
    <form id="client-form" class="mb-4" autocomplete="off">
      <h2>Agregar Cliente</h2>
      <div class="form-group">
        <label for="client-name">Nombre:</label>
        <input
          type="text"
          id="client-name"
          class="form-control form-control-lg"
          placeholder="Nombre"
          required
        />
      </div>
      <div class="form-group">
        <label for="client-phone">Teléfono:</label>
        <input
          type="tel"
          id="client-phone"
          class="form-control form-control-lg"
          placeholder="Teléfono"
        />
      </div>
      <div class="form-group">
        <label for="client-street">Domicilio:</label>
        <div class="form-row">
          <div class="col-8">
            <input
              type="text"
              id="client-street"
              class="form-control form-control-lg"
              placeholder="Calle"
            />
          </div>
          <div class="col-4">
            <input
              type="text"
              id="client-number"
              class="form-control form-control-lg"
              placeholder="N°"
            />
          </div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary btn-lg btn-block">
        Agregar Cliente
      </button>
    </form>

    <!-- Formulario de transacciones -->
    <form id="account-form" class="mb-4" autocomplete="off">
      <h2>Registrar Transacción</h2>

      <div class="form-group">
        <input
          type="text"
          id="client-filter"
          class="form-control mb-3 form-control-lg"
          placeholder="Filtrar Clientes"
        />
        <label for="select-client">Seleccionar Cliente</label>
        <select id="select-client" class="form-control form-control-lg" required></select>
      </div>

      <div class="form-group">
        <label for="transaction-type">Tipo de Transacción</label>
        <select id="transaction-type" class="form-control form-control-lg">
          <option value="purchase">Compra</option>
          <option value="payment">Pago</option>
        </select>
      </div>

      <div class="form-group">
        <label for="amount">Monto</label>
        <input
          type="text"
          inputmode="decimal"
          id="amount"
          class="form-control form-control-lg"
          placeholder="Monto (ej: 1.234,56)"
          required
        />
      </div>

      <div class="form-group">
        <label for="payment-method">Método de Pago</label>
        <select id="payment-method" class="form-control form-control-lg">
          <option value="efectivo">Efectivo</option>
          <option value="tarjeta">Tarjeta</option>
          <option value="transferencia">Transferencia</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary btn-lg btn-block">
        Registrar Transacción
      </button>
    </form>

    <!-- Tabla de deudas -->
    <section>
      <h2>Resumen de Deudas</h2>
      <input
        type="text"
        id="debt-search"
        class="form-control form-control-lg mb-4"
        placeholder="Buscar Deudas"
      />
      <div class="table-responsive">
        <table id="debt-list" class="table table-bordered table-striped">
          <thead class="thead-dark">
            <tr>
              <th>Cliente</th>
              <th>Transacciones</th>
              <th>Saldo</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="text-center mt-5 mb-3 small">
    <p>&copy; 2024 - Gestión de Cuentas Corrientes | Desarrollado por Pablo Nahuel García</p>
  </footer>

  <!-- Terceros (orden correcto para módulos) -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- App -->
  <script src="scripts/uiAlerts.js"></script>
  <script type="module" src="scripts/app.js"></script>
</body>
</html>
